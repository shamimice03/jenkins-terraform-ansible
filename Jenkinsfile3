pipeline {
    agent {label 'aws'}
    environment{
        GITHUB_CRED = credentials('github')
    }
    stages {
         stage('Ansible-Install docker on remote hosts') {
            steps {
                 sh 'pwd'
                 sh 'whereis ansible'
                 sh 'ls -la'
                 ansiblePlaybook credentialsId: 'ec2-ssh-key', disableHostKeyChecking: true, installation: 'ansible', inventory: 'static_inventory', playbook: 'docker_installation_playbook.yaml'
                }
        }
    }
}

